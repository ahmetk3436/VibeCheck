{
  "tasks": [
    {
      "id": "enhance_001",
      "title": "Replace fallback keyword analysis with robust AI scoring and insight engine",
      "description": "The backend vibe_service.go currently falls back to a simplistic keyword matching algorithm (lines 228-296) that returns random aesthetics when no keywords match and calculates vibe scores with basic +/-10 increments. This produces low-quality, often random results.\n\nModify file: backend/internal/services/vibe_service.go\n\n1. IMPROVE the fallbackAnalyze method to use a weighted multi-signal scoring algorithm instead of simple keyword matching:\n   - Create a comprehensive keyword map with weighted scores (1.0 for exact match, 0.5 for partial). Add 15+ keywords per aesthetic category covering slang, emoji descriptions, and common phrases.\n   - Implement a scoring system: iterate ALL aesthetic categories, sum weighted keyword matches, pick the highest-scoring aesthetic (not first match).\n   - For vibe_score: use sentiment analysis with 3 tiers ‚Äî strong positive words (+15), mild positive (+8), neutral (0), mild negative (-8), strong negative (-15). Add length bonus (+5 for \u003e100 chars, +3 for \u003e50). Base score 55 instead of 50.\n   - Generate dynamic insight strings using 5+ templates per aesthetic (e.g., for 'chill': \"Your calm energy is exactly what you need right now\", \"Embracing the slow vibes ‚Äî this is self-care\"). Select template based on score range (10-30: empathetic, 31-60: neutral, 61-100: enthusiastic).\n   - REMOVE the random fallback at line 266. Instead, default to 'peaceful' aesthetic with score 50 and insight \"Take a moment to check in with yourself\".\n\n2. Add a new method `generateInsight(aestheticKey string, vibeScore int, moodText string) string` that creates contextual insights combining the aesthetic name, score range, and detected emotion words.\n\n3. Ensure the OpenAI path (lines 132-226) remains unchanged ‚Äî this only improves the fallback path.\n\nTest: cd backend \u0026\u0026 go build ./...",
      "status": "completed",
      "priority": 10,
      "depends_on": [],
      "test_command": "cd backend \u0026\u0026 go build ./...",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T08:06:10Z"
    },
    {
      "id": "enhance_002",
      "title": "Add vibe trend endpoint and enhance stats with weekly data",
      "description": "The backend has /vibes/stats but it only returns aggregate data (current_streak, longest_streak, total_checks, avg_vibe_score, top_aesthetic). There is no trend data for the history screen chart.\n\nModify file: backend/internal/services/vibe_service.go ‚Äî Add new method:\n```go\nfunc (s *VibeService) GetVibeTrend(userID uuid.UUID, days int) ([]map[string]interface{}, error)\n```\nThis queries vibe_checks for the last N days (default 7), returns array of {date, vibe_score, aesthetic, emoji}. Use `ORDER BY check_date ASC`. If a day has no check, include it with vibe_score: 0 and aesthetic: \"\" so the frontend can show gaps.\n\nModify file: backend/internal/dto/vibe_dto.go ‚Äî Add:\n```go\ntype VibeTrendItem struct {\n    Date      string `json:\"date\"`\n    VibeScore int    `json:\"vibe_score\"`\n    Aesthetic string `json:\"aesthetic\"`\n    Emoji     string `json:\"emoji\"`\n}\n```\n\nModify file: backend/internal/handlers/vibe_handler.go ‚Äî Add handler:\n```go\nfunc (h *VibeHandler) GetVibeTrend(c *fiber.Ctx) error\n```\nParse query param `days` (default 7, max 30). Call service.GetVibeTrend. Return JSON array.\n\nModify file: backend/internal/routes/routes.go ‚Äî Add route:\n```go\nvibes.Get(\"/trend\", vibeHandler.GetVibeTrend)  // inside the protected vibes group\n```\nPlace this BEFORE the wildcard routes to avoid routing conflicts.\n\nAlso enhance GetVibeStats to include `last_7_avg` (average score of last 7 days) and `mood_distribution` (count per aesthetic as map[string]int).\n\nTest: cd backend \u0026\u0026 go build ./...",
      "status": "completed",
      "priority": 10,
      "depends_on": [],
      "test_command": "cd backend \u0026\u0026 go build ./...",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T08:17:59Z"
    },
    {
      "id": "enhance_003",
      "title": "Add insight field to vibe response and return it from all endpoints",
      "description": "The VibeCheck model has an `insight` field (backend/internal/models/vibe.go line 22) and the mobile VibeCard component accepts an `insight` prop (components/ui/VibeCard.tsx line 14), but the home screen NEVER passes the insight to VibeCard (app/(protected)/home.tsx line 259-269). Additionally, the backend's analyzeWithAI stores insight but the fallback generates a generic one.\n\nModify file: mobile/app/(protected)/home.tsx\n1. In the VibeCard usage (around line 259), add the `insight` prop:\n```tsx\n\u003cVibeCard\n  aesthetic={todayVibe.aesthetic}\n  emoji={todayVibe.emoji}\n  vibeScore={todayVibe.vibe_score}\n  moodText={todayVibe.mood_text}\n  colorPrimary={todayVibe.color_primary}\n  colorSecondary={todayVibe.color_secondary}\n  colorAccent={todayVibe.color_accent}\n  date={todayVibe.check_date}\n  streak={stats?.current_streak}\n  insight={todayVibe.insight}\n/\u003e\n```\n\nModify file: mobile/types/vibe.ts\n- The `insight` field is already optional in VibeCheck interface (line 10) ‚Äî no change needed there.\n\nModify file: mobile/components/ui/VibeCard.tsx\n- The insight rendering already exists (lines 81-85) ‚Äî no change needed.\n- However, enhance the insight display: wrap it in a View with `className=\"bg-gray-800/50 rounded-xl p-3 mt-4\"` and use `text-sm text-gray-300` instead of `text-gray-500` for better readability. Add a small sparkle emoji prefix: `{'‚ú® ' + insight}`.\n\nModify file: mobile/app/(protected)/history.tsx\n- In the expanded content section (line 144), add insight display ABOVE the Share button:\n```tsx\n{item.insight \u0026\u0026 (\n  \u003cText className=\"text-sm text-gray-400 italic mb-2\"\u003e\n    {'‚ú® '}{item.insight}\n  \u003c/Text\u003e\n)}\n```\n\nThis ensures AI-generated insights are visible everywhere vibes are displayed.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 9,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T11:34:17Z",
      "error": "tests failed after 5 retries: command failed: exit status 2\nstdout: components/ui/BentoGrid.tsx(64,17): error TS2769: No overload matches this call.\n  Overload 1 of 2, '(props: LinearGradientProps): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\n  Overload 2 of 2, '(props: LinearGradientProps, context: any): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\ncomponents/ui/BentoGrid.tsx(172,9): error TS2769: No overload matches this call.\n  Overload 1 of 2, '(props: LinearGradientProps): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\n  Overload 2 of 2, '(props: LinearGradientProps, context: any): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\ncomponents/ui/Button.tsx(94,7): error TS2554: Expected 1 arguments, but got 0.\ncomponents/ui/Button.tsx(133,11): error TS2769: No overload matches this call.\n  Overload 1 of 2, '(props: LinearGradientProps): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\n  Overload 2 of 2, '(props: LinearGradientProps, context: any): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\ncomponents/ui/Modal.tsx(66,26): error TS2322: Type '(callback?: EndCallback | undefined) =\u003e void' is not assignable to type 'CompositeAnimation'.\ncomponents/ui/Modal.tsx(66,43): error TS2322: Type '(callback?: EndCallback | undefined) =\u003e void' is not assignable to type 'CompositeAnimation'.\ncomponents/ui/Modal.tsx(68,26): error TS2322: Type '(callback?: EndCallback | undefined) =\u003e void' is not assignable to type 'CompositeAnimation'.\ncomponents/ui/Modal.tsx(68,43): error TS2322: Type '(callback?: EndCallback | undefined) =\u003e void' is not assignable to type 'CompositeAnimation'.\ncomponents/ui/ShareableResult.tsx(98,9): error TS2769: No overload matches this call.\n  Overload 1 of 2, '(props: LinearGradientProps): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\n  Overload 2 of 2, '(props: LinearGradientProps, context: any): LinearGradient', gave the following error.\n    Type 'string[]' is not assignable to type 'readonly [ColorValue, ColorValue, ...ColorValue[]]'.\n      Source provides no match for required element at position 0 in target.\ncomponents/ui/ShareableResult.tsx(135,97): error TS2769: No overload matches this call.\n  Overload 1 of 2, '(props: TextProps): Text', gave the following error.\n    Object literal may only specify known properties, and 'capitalize' does not exist in type 'TextStyle | RecursiveArray\u003cFalsy | TextStyle | RegisteredStyle\u003cTextStyle\u003e\u003e'.\n  Overload 2 of 2, '(props: TextProps, context: any): Text', gave the following error.\n    Object literal may only specify known properties, and 'capitalize' does not exist in type 'TextStyle | RecursiveArray\u003cFalsy | TextStyle | RegisteredStyle\u003cTextStyle\u003e\u003e'.\ncomponents/ui/ShareableResult.tsx(206,75): error TS2769: No overload matches this call.\n  Overload 1 of 2, '(props: TextProps): Text', gave the following error.\n    Object literal may only specify known properties, and 'capitalize' does not exist in type 'TextStyle | RecursiveArray\u003cFalsy | TextStyle | RegisteredStyle\u003cTextStyle\u003e\u003e'.\n  Overload 2 of 2, '(props: TextProps, context: any): Text', gave the following error.\n    Object literal may only specify known properties, and 'capitalize' does not exist in type 'TextStyle | RecursiveArray\u003cFalsy | TextStyle | RegisteredStyle\u003cTextStyle\u003e\u003e'.\n\nstderr: "
    },
    {
      "id": "enhance_004",
      "title": "Enhance onboarding with gradient backgrounds and animated transitions",
      "description": "The onboarding screen (mobile/app/onboarding.tsx) exists with 3 pages but lacks visual polish ‚Äî no gradients, no LinearGradient backgrounds, plain Next buttons, and minimal styling. The app's primary color is blue (#2563eb) but the onboarding uses indigo-500.\n\nModify file: mobile/app/onboarding.tsx\n\n1. Add imports at top:\n```tsx\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { Animated } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\n```\n\n2. Replace Page 1 (Welcome) inner content ‚Äî wrap the card in LinearGradient:\n- Replace the `bg-indigo-500/10` View with `\u003cLinearGradient colors={['#1e3a8a', '#312e81', '#030712']} start={{x:0,y:0}} end={{x:1,y:1}} className=\"rounded-3xl p-10 items-center w-full\"\u003e`\n- Change the sparkle emoji to be larger (text-8xl) and add a subtitle: `\u003cText className=\"text-base text-primary-300 mt-2 text-center\"\u003eDiscover your daily aesthetic vibe\u003c/Text\u003e`\n\n3. Replace Page 2 (How It Works) feature icons:\n- Replace plain emoji circles with `\u003cLinearGradient colors={['#2563eb20', '#8b5cf620']} className=\"w-14 h-14 rounded-full items-center justify-center\"\u003e`\n- Add step numbers (1, 2, 3) as small badges on each feature item\n\n4. Replace Page 3 (CTA) buttons:\n- \"Try Free\" button: wrap in `\u003cLinearGradient colors={['#2563eb', '#1d4ed8']} className=\"rounded-2xl py-4 px-8 w-full items-center mb-4\"\u003e` \n- \"Sign In\" button: keep border style but use `border-primary-500/50` instead of `border-gray-700`\n\n5. Replace plain dot indicators with animated dots:\n- Active dot: `w-6 h-2 rounded-full bg-primary-500` (wider pill shape)\n- Inactive dot: `w-2 h-2 rounded-full bg-gray-700`\n\n6. Add Next/Back navigation: On pages 1 and 2, show a circular Pressable with Ionicons 'arrow-forward' instead of plain text \"Next\". On pages 1+, show 'Skip' text in top-right.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 8,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T09:27:51Z"
    },
    {
      "id": "enhance_005",
      "title": "Integrate unused 2025-2026 trend components into app screens",
      "description": "Seven production-ready components exist in mobile/components/ui/ but are NOT imported or used anywhere: LoadingShimmer.tsx, StreakBadge.tsx, BentoGrid.tsx, PrivacyDashboard.tsx, ContextualPaywall.tsx, ShareableResult.tsx, GestureSwipeCard.tsx. These implement 2025-2026 UI trends and must be integrated.\n\nModify file: mobile/app/(protected)/home.tsx\n1. Import StreakBadge: `import StreakBadge from '../../components/ui/StreakBadge';`\n2. Replace the plain streak text in the header (lines 222-224) with: `\u003cStreakBadge streak={stats.current_streak} /\u003e` \n3. Import LoadingShimmer: `import { CardSkeleton } from '../../components/ui/LoadingShimmer';`\n4. Replace the manual skeleton loading View (lines 157-169) with: `\u003cCardSkeleton /\u003e` wrapped in a SafeAreaView\n5. Import ShareableResult: `import ShareableResult from '../../components/ui/ShareableResult';`\n6. Replace the plain \"Share Your Vibe\" Pressable (lines 270-277) with:\n```tsx\n\u003cShareableResult\n  aesthetic={todayVibe.aesthetic}\n  emoji={todayVibe.emoji}\n  vibeScore={todayVibe.vibe_score}\n  moodText={todayVibe.mood_text}\n  colorPrimary={todayVibe.color_primary}\n  streak={stats?.current_streak}\n/\u003e\n```\nNote: Check ShareableResult.tsx props interface first and pass only what it accepts. If it uses react-native-view-shot for capture, that package is already in package.json.\n\nModify file: mobile/app/(protected)/history.tsx\n1. Import GestureSwipeCard: `import GestureSwipeCard from '../../components/ui/GestureSwipeCard';`\n2. Wrap each history item in GestureSwipeCard with swipeRight for share action\n3. Import LoadingShimmer for the loading state\n\nModify file: mobile/app/(protected)/settings.tsx\n1. Import PrivacyDashboard: `import PrivacyDashboard from '../../components/ui/PrivacyDashboard';`\n2. Add a new \"Privacy\" section between Security and Subscription sections that renders `\u003cPrivacyDashboard /\u003e`\n\nCheck each component's props interface before integrating. Only pass props that exist.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 8,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T11:50:32Z",
      "error": "execution failed: claude CLI error: signal: killed\nstdout: \nstderr: "
    },
    {
      "id": "enhance_006",
      "title": "Build vibe trend chart and filter chips for history screen",
      "description": "The history screen (mobile/app/(protected)/history.tsx) shows a basic flat list with no chart or filtering. It needs a 7-day vibe score trend visualization and time-range filter chips.\n\nModify file: mobile/app/(protected)/history.tsx\n\n1. Add state for filters and trend data:\n```tsx\nconst [filter, setFilter] = useState\u003c'week' | 'month' | 'all'\u003e('all');\nconst [trend, setTrend] = useState\u003c{date: string; vibe_score: number; emoji: string}[]\u003e([]);\n```\n\n2. Add loadTrend function:\n```tsx\nconst loadTrend = async () =\u003e {\n  try {\n    const res = await api.get('/vibes/trend?days=7');\n    setTrend(res.data || []);\n  } catch { /* ignore */ }\n};\n```\nCall loadTrend in the useEffect alongside loadHistory.\n\n3. Add filter chips above the FlatList as a horizontal row:\n```tsx\n\u003cView className=\"flex-row gap-2 px-5 mb-4\"\u003e\n  {(['week', 'month', 'all'] as const).map((f) =\u003e (\n    \u003cPressable\n      key={f}\n      className={`px-4 py-2 rounded-full ${filter === f ? 'bg-primary-600' : 'bg-gray-800'}`}\n      onPress={() =\u003e { hapticSelection(); setFilter(f); }}\n    \u003e\n      \u003cText className={`text-sm font-medium ${filter === f ? 'text-white' : 'text-gray-400'}`}\u003e\n        {f === 'week' ? '7 Days' : f === 'month' ? '30 Days' : 'All Time'}\n      \u003c/Text\u003e\n    \u003c/Pressable\u003e\n  ))}\n\u003c/View\u003e\n```\nUpdate loadHistory to pass limit based on filter (week=7, month=30, all=50).\n\n4. Build a simple bar chart using plain Views (NO external chart library):\n```tsx\n\u003cView className=\"mx-5 mb-4 bg-gray-900 rounded-2xl p-4 border border-gray-800\"\u003e\n  \u003cText className=\"text-sm font-semibold text-white mb-3\"\u003e7-Day Trend\u003c/Text\u003e\n  \u003cView className=\"flex-row items-end justify-between\" style={{height: 80}}\u003e\n    {trend.map((item, i) =\u003e (\n      \u003cView key={i} className=\"items-center flex-1\"\u003e\n        \u003cView\n          className=\"w-6 rounded-t-lg bg-primary-500\"\n          style={{height: Math.max(4, (item.vibe_score / 100) * 70)}}\n        /\u003e\n        \u003cText className=\"text-xs text-gray-500 mt-1\"\u003e\n          {new Date(item.date).toLocaleDateString('en-US', {weekday: 'narrow'})}\n        \u003c/Text\u003e\n      \u003c/View\u003e\n    ))}\n  \u003c/View\u003e\n\u003c/View\u003e\n```\nShow this chart only when trend has data and user is not guest. Place it as ListHeaderComponent of FlatList.\n\n5. Add a guest empty state: when isGuest, show a card saying \"Sign up to track your vibe history\" with a CTA button to /(auth)/register.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 7,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T11:56:06Z",
      "error": "execution failed: claude CLI error: signal: killed\nstdout: \nstderr: "
    },
    {
      "id": "enhance_007",
      "title": "Polish VibeCard with LinearGradient background and enhanced layout",
      "description": "The VibeCard component (mobile/components/ui/VibeCard.tsx) uses a plain View with background opacity (colorPrimary + '15'). It needs a proper gradient background, better typography hierarchy, and more visual depth for App Store quality.\n\nModify file: mobile/components/ui/VibeCard.tsx\n\n1. Add imports:\n```tsx\nimport { LinearGradient } from 'expo-linear-gradient';\n```\n\n2. Replace the outer View (line 37) with LinearGradient:\n```tsx\n\u003cLinearGradient\n  colors={[colorPrimary + '25', colorSecondary + '15', '#030712']}\n  start={{x: 0, y: 0}}\n  end={{x: 1, y: 1}}\n  className=\"w-full rounded-3xl overflow-hidden\"\n\u003e\n```\nClose with `\u003c/LinearGradient\u003e` instead of `\u003c/View\u003e`.\n\n3. Enhance the vibe score circle (lines 56-68):\n- Add a secondary outer ring: wrap the score circle in another View with `style={{borderWidth: 1, borderColor: colorPrimary + '40', borderRadius: 9999, padding: 4}}`\n- Below the score, add a descriptive label based on range:\n```tsx\n\u003cText className=\"text-xs font-medium mt-1\" style={{color: colorPrimary}}\u003e\n  {vibeScore \u003e= 80 ? 'Peak Vibes' : vibeScore \u003e= 60 ? 'Good Energy' : vibeScore \u003e= 40 ? 'Mellow' : 'Low Key'}\n\u003c/Text\u003e\n```\n\n4. Enhance the color palette row (lines 88-101):\n- Make circles larger: `w-8 h-8 rounded-full` with a subtle border: `borderWidth: 2, borderColor: '#ffffff20'`\n- Add labels below each dot: Primary, Secondary, Accent in `text-xs text-gray-600`\n\n5. Add a decorative pattern overlay at the top of the card:\n```tsx\n\u003cView className=\"absolute top-0 right-0 w-32 h-32 opacity-10\"\u003e\n  \u003cView className=\"w-full h-full rounded-bl-full\" style={{backgroundColor: colorPrimary}} /\u003e\n\u003c/View\u003e\n```\n\n6. Add the VibeCheck branding text at top with `letterSpacing: 4` for a premium look.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 7,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T11:59:12Z",
      "error": "execution failed: claude CLI error: signal: killed\nstdout: \nstderr: "
    },
    {
      "id": "enhance_008",
      "title": "Add gradient accents and visual polish to home screen input area",
      "description": "The home screen (mobile/app/(protected)/home.tsx) input area is functional but lacks visual appeal ‚Äî plain gray background, no gradient accents, basic submit button. Needs App Store-quality polish.\n\nModify file: mobile/app/(protected)/home.tsx\n\n1. Add import: `import { LinearGradient } from 'expo-linear-gradient';`\n\n2. Enhance the input section card (line 281, `bg-gray-900 rounded-3xl p-6 border border-gray-800`):\n- Wrap with a subtle top gradient accent: add a 4px height LinearGradient strip at top of the card with `colors={['#2563eb', '#8b5cf6']}` and `className=\"h-1 rounded-t-3xl\"`\n- Change border to `border-gray-700/50` for slightly more contrast\n\n3. Replace the submit button (lines 307-322):\n- Wrap in LinearGradient instead of plain bg-primary-600:\n```tsx\n\u003cPressable onPress={handleVibeCheck} disabled={submitting || !moodText.trim()}\u003e\n  \u003cLinearGradient\n    colors={submitting || !moodText.trim() ? ['#374151', '#374151'] : ['#2563eb', '#1d4ed8']}\n    start={{x: 0, y: 0}}\n    end={{x: 1, y: 0}}\n    className=\"rounded-2xl py-4 items-center\"\n  \u003e\n    {/* existing button content */}\n  \u003c/LinearGradient\u003e\n\u003c/Pressable\u003e\n```\n\n4. Enhance the stats row (lines 328-356):\n- Add LinearGradient accent to the active streak card: replace `bg-amber-500/10` with `\u003cLinearGradient colors={['#f59e0b15', '#f59e0b05']} className=\"flex-1 rounded-2xl p-4 items-center border border-amber-500/20\"\u003e`\n- Add a subtle bottom shadow to each stat card using `style={{shadowColor: '#000', shadowOffset: {width: 0, height: 2}, shadowOpacity: 0.2, shadowRadius: 4, elevation: 3}}`\n\n5. Enhance the upgrade banner (lines 360-370):\n- Replace plain bg with LinearGradient: `colors={['#2563eb10', '#8b5cf610']}`\n- Add a small crown icon before \"Upgrade\": `\u003cIonicons name=\"diamond\" size={14} color=\"#3b82f6\" /\u003e`\n- Import Ionicons if not already imported\n\n6. Enhance streak celebration overlay (lines 200-207):\n- Replace plain bg-black/80 with LinearGradient: `colors={['rgba(0,0,0,0.9)', 'rgba(37,99,235,0.3)', 'rgba(0,0,0,0.9)']}`\n- Add scaling animation effect using Animated.View with a spring animation on mount\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "in_progress",
      "priority": 7,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T11:59:12Z",
      "error": "execution failed: claude CLI error: signal: killed\nstdout: \nstderr: "
    },
    {
      "id": "enhance_009",
      "title": "Fix guest device ID to be persistent and add proper guest vibe history",
      "description": "CRITICAL BUG: In home.tsx line 94, the guest device_id is generated fresh every request with `'guest-' + Math.random().toString(36).substring(2, 10)`. This means the backend's 3-per-day guest limit (vibe_service.go line 97-99) NEVER actually limits because each request has a unique device ID. The guest can use unlimited vibes.\n\nModify file: mobile/app/(protected)/home.tsx\n\n1. Add import: `import AsyncStorage from '@react-native-async-storage/async-storage';`\n2. Add state: `const [deviceId, setDeviceId] = useState\u003cstring\u003e('');`\n3. Add useEffect to generate/retrieve persistent device ID:\n```tsx\nuseEffect(() =\u003e {\n  const initDeviceId = async () =\u003e {\n    let id = await AsyncStorage.getItem('guest_device_id');\n    if (!id) {\n      id = 'guest-' + Math.random().toString(36).substring(2, 15);\n      await AsyncStorage.setItem('guest_device_id', id);\n    }\n    setDeviceId(id);\n  };\n  initDeviceId();\n}, []);\n```\n4. Replace line 94 `device_id: 'guest-' + Math.random()...` with `device_id: deviceId`\n5. Add early return if deviceId is empty: `if (isGuest \u0026\u0026 !deviceId) return;` before the API call\n\nAdditionally, store guest vibe results locally:\n6. After a successful guest vibe check (line 97), save to AsyncStorage:\n```tsx\nconst guestHistory = JSON.parse(await AsyncStorage.getItem('guest_vibes') || '[]');\nguestHistory.unshift(result);\nawait AsyncStorage.setItem('guest_vibes', JSON.stringify(guestHistory.slice(0, 10)));\n```\n\n7. In history.tsx, for guest users, load from AsyncStorage instead of showing nothing:\n```tsx\nif (isGuest) {\n  const stored = await AsyncStorage.getItem('guest_vibes');\n  if (stored) setVibes(JSON.parse(stored));\n  setIsLoading(false);\n}\n```\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 9,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T11:38:13Z",
      "error": "execution failed: claude CLI error: signal: killed\nstdout: \nstderr: "
    },
    {
      "id": "enhance_010",
      "title": "Add share result card with ViewShot capture for Instagram/social sharing",
      "description": "The app has react-native-view-shot in package.json and ShareableResult component exists but is unused. The current share (home.tsx line 141-151) only shares plain text. Users need a beautiful gradient card they can share as an image to Instagram Stories, etc.\n\nModify file: mobile/components/ui/ShareableResult.tsx ‚Äî Verify and update the component to accept these props:\n```tsx\ninterface ShareableResultProps {\n  aesthetic: string;\n  emoji: string;\n  vibeScore: number;\n  moodText: string;\n  colorPrimary: string;\n  colorSecondary?: string;\n  colorAccent?: string;\n  streak?: number;\n  onShare?: () =\u003e void;\n}\n```\n\nThe component should:\n1. Use ViewShot ref to capture the card as a PNG image\n2. Render a gradient card (LinearGradient with colorPrimary ‚Üí colorSecondary) containing:\n   - Large emoji (text-7xl)\n   - Aesthetic name (text-2xl font-bold text-white)\n   - Vibe score in a circle with border\n   - Mood text quote (truncated to 100 chars)\n   - Color palette dots\n   - \"vibecheck.app\" branding footer\n3. Below the card, render a \"Share\" Pressable that:\n   - Captures the ViewShot as base64 PNG using `captureRef(viewShotRef, {format: 'png', quality: 0.9})`\n   - Calls Share.share with the captured image URI\n   - Triggers hapticSuccess on share\n4. Also render a \"Share as Text\" fallback button that shares the plain text format\n\nModify file: mobile/app/(protected)/home.tsx\n- Import ShareableResult and replace the plain share button (lines 270-277) with the ShareableResult component, passing todayVibe data as props\n- Remove the old handleShare function (lines 141-151) since ShareableResult handles sharing internally\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T10:40:11Z"
    },
    {
      "id": "enhance_011",
      "title": "Add haptic feedback to all remaining interactive elements and micro-interactions",
      "description": "While the app has haptics imported in most screens, several interactive elements are missing haptic feedback. Apple Guideline 4.2 requires consistent tactile feedback.\n\nModify file: mobile/app/onboarding.tsx\n- The goToPage function (line 68) calls scrollTo but has no haptic. Add `hapticLight()` at the start.\n- handleTryFree has hapticSuccess (good). handleSignIn has hapticLight (good).\n- Add hapticSelection() to each dot indicator if they become pressable.\n\nModify file: mobile/app/(auth)/login.tsx\n- Verify all buttons have haptic feedback. The \"Continue as Guest\" link needs `hapticLight()` on press.\n- The form submit button needs `hapticMedium()` on press.\n- Import all needed haptics: `import { hapticLight, hapticMedium, hapticSuccess, hapticError } from '../../lib/haptics';`\n\nModify file: mobile/app/(auth)/register.tsx\n- Same pattern as login. Ensure register button has `hapticMedium()`, success callback has `hapticSuccess()`, error has `hapticError()`.\n\nModify file: mobile/app/(protected)/home.tsx\n- TextInput onFocus: add `hapticLight()` when user taps to type\n- The guest CTA banner (line 243) Pressable needs `hapticSelection()` added to onPress\n- Pull-to-refresh already triggers via onRefresh ‚Äî add `hapticLight()` at start of onRefresh\n\nModify file: mobile/app/(protected)/history.tsx\n- The empty state \"Check My Vibe\" button (line 224-231) needs `hapticMedium()` on press\n- Each history card expand (toggleExpand, line 76) already has hapticSelection (good)\n\nModify file: mobile/app/(protected)/paywall.tsx\n- Package cards (line 130-152): hapticSelection is called in handlePackagePurchase (good)\n- Close button (line 85-93): has hapticSelection (good)\n\nModify file: mobile/components/ui/VibeCard.tsx\n- This is a display component, no interactions needed.\n\nEnsure NO duplicate haptic calls. Only add where missing.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T10:44:06Z"
    },
    {
      "id": "enhance_012",
      "title": "Add contextual paywall triggers at win moments instead of only settings",
      "description": "The paywall is only accessible from settings screen subscription section and the upgrade banner on home. Per 2025-2026 trends, contextual paywalls should appear at 'win' moments for higher conversion.\n\nModify file: mobile/app/(protected)/home.tsx\n1. After a successful vibe check (inside the try block after line 103), check if the user is authenticated but NOT subscribed. If so, and if this is their 3rd+ vibe check (stats.total_checks \u003e= 3), show a contextual upgrade prompt after a 2-second delay:\n```tsx\nif (isAuthenticated \u0026\u0026 !isSubscribed \u0026\u0026 stats \u0026\u0026 stats.total_checks \u003e= 3) {\n  setTimeout(() =\u003e {\n    setShowUpgradePrompt(true);\n  }, 2000);\n}\n```\n2. Add state: `const [showUpgradePrompt, setShowUpgradePrompt] = useState(false);`\n3. Import `useSubscription` from contexts: `const { isSubscribed } = useSubscription();`\n4. Add a bottom sheet-style prompt (using the existing Modal component):\n```tsx\n\u003cModal visible={showUpgradePrompt} onClose={() =\u003e setShowUpgradePrompt(false)} title=\"Loving VibeCheck?\"\u003e\n  \u003cText className=\"text-sm text-gray-400 mb-4\"\u003eUnlock AI-powered deep analysis and 20+ aesthetic palettes\u003c/Text\u003e\n  \u003cButton title=\"Go Premium\" variant=\"primary\" onPress={() =\u003e { setShowUpgradePrompt(false); router.push('/(protected)/paywall'); }} /\u003e\n  \u003cPressable className=\"mt-3 py-2 items-center\" onPress={() =\u003e setShowUpgradePrompt(false)}\u003e\n    \u003cText className=\"text-gray-500 text-sm\"\u003eMaybe later\u003c/Text\u003e\n  \u003c/Pressable\u003e\n\u003c/Modal\u003e\n```\n\nModify file: mobile/app/(protected)/history.tsx\n5. When history has 5+ items and user is not subscribed, show a ContextualPaywall banner from components/ui/ContextualPaywall.tsx above the list:\n```tsx\n{vibes.length \u003e= 5 \u0026\u0026 !isSubscribed \u0026\u0026 (\n  \u003cContextualPaywall\n    trigger=\"history_milestone\"\n    onUpgrade={() =\u003e router.push('/(protected)/paywall')}\n  /\u003e\n)}\n```\nImport ContextualPaywall and useSubscription.\n\nCheck ContextualPaywall.tsx props and adapt the usage to match its actual interface.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T10:48:23Z"
    },
    {
      "id": "enhance_013",
      "title": "Add BentoGrid stats dashboard to home screen below vibe card",
      "description": "The BentoGrid component (mobile/components/ui/BentoGrid.tsx) exists but is unused. The home screen shows stats as 3 plain cards in a row. Replace with a visually richer Bento Grid layout using the existing component.\n\nModify file: mobile/app/(protected)/home.tsx\n\n1. Import BentoGrid components. First read BentoGrid.tsx to check exact exports ‚Äî it likely exports StatBentoItem, ActionBentoItem, GradientBentoItem, and a container BentoGrid.\n\n2. Replace the stats row (lines 328-356) with a BentoGrid layout. Use the component's API ‚Äî likely something like:\n```tsx\n\u003cBentoGrid\u003e\n  \u003cStatBentoItem\n    icon=\"üî•\"\n    value={stats.current_streak}\n    label=\"Day Streak\"\n    highlight={stats.current_streak \u003e 0}\n  /\u003e\n  \u003cStatBentoItem\n    icon=\"üìä\"\n    value={stats.total_checks}\n    label=\"Total Vibes\"\n  /\u003e\n  \u003cStatBentoItem\n    icon=\"‚≠ê\"\n    value={Math.round(stats.avg_vibe_score)}\n    label=\"Avg Score\"\n  /\u003e\n  \u003cActionBentoItem\n    icon=\"üìà\"\n    title=\"View History\"\n    onPress={() =\u003e router.push('/(protected)/history')}\n  /\u003e\n\u003c/BentoGrid\u003e\n```\n\n3. If BentoGrid uses different props, adapt accordingly. The goal is to use the existing component instead of raw Views.\n\n4. Also add the top_aesthetic stat from the stats response (already returned by backend). Show it as a GradientBentoItem:\n```tsx\n\u003cGradientBentoItem\n  title=\"Top Aesthetic\"\n  value={stats.top_aesthetic || 'None yet'}\n  colors={['#8b5cf6', '#6366f1']}\n/\u003e\n```\n\n5. Wrap the entire BentoGrid in `\u003cView className=\"mx-5 mt-6\"\u003e` for consistent padding.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T10:51:14Z"
    },
    {
      "id": "enhance_014",
      "title": "Add tab bar gradient accent line and polish protected layout",
      "description": "The custom tab bar (mobile/app/(protected)/_layout.tsx) is functional but plain ‚Äî gray background with no visual distinction. The active tab color is hardcoded to #2563eb but should use the primary color consistently.\n\nModify file: mobile/app/(protected)/_layout.tsx\n\n1. Add import: `import { LinearGradient } from 'expo-linear-gradient';`\n\n2. Add a gradient top border to the tab bar. Above the tab bar View (line 54), add:\n```tsx\n\u003cLinearGradient\n  colors={['#2563eb', '#8b5cf6', '#2563eb']}\n  start={{x: 0, y: 0}}\n  end={{x: 1, y: 0}}\n  style={{height: 1}}\n/\u003e\n```\nThis replaces the plain `border-t border-gray-800` class. Remove that class from the tab bar View.\n\n3. Enhance active tab indicator: Replace the small dot (lines 89-91, `w-1 h-1 rounded-full bg-primary-600`) with a wider pill:\n```tsx\n{isActive \u0026\u0026 (\n  \u003cView className=\"w-4 h-1 rounded-full bg-primary-500 mt-1\" /\u003e\n)}\n```\n\n4. Add subtle background highlight for active tab:\n```tsx\n\u003cPressable\n  key={tab.label}\n  className={`flex-1 items-center py-1 rounded-xl ${isActive ? 'bg-primary-600/10' : ''}`}\n  ...\n\u003e\n```\n\n5. Change the tab bar background from `bg-gray-900` to a slightly darker `bg-gray-950/95` with backdrop blur effect. Since expo-blur's BlurView can be used:\n```tsx\nimport { BlurView } from 'expo-blur';\n```\nWrap the tab bar in BlurView with `intensity={40} tint=\"dark\"` and make the background semi-transparent.\n\n6. Fix the hardcoded color on line 81: replace `color={isActive ? '#2563eb' : '#9ca3af'}` with `color={isActive ? '#3b82f6' : '#6b7280'}` for better contrast.\n\n7. Add tab press scale animation: wrap each tab icon in an Animated.View that scales to 0.9 on press-in and back to 1.0 on press-out using Pressable's onPressIn/onPressOut.\n\nTest: cd mobile \u0026\u0026 npx tsc --noEmit",
      "status": "completed",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile \u0026\u0026 npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "",
      "updated_at": "2026-02-15T10:53:45Z"
    }
  ]
}